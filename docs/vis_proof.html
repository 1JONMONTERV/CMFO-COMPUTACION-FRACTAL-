<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CMFO | Geometric Proof of Stability</title>
    <style>
        body {
            margin: 0;
            background: #000;
            color: #0f0;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }

        #canvas {
            display: block;
        }

        #overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            pointer-events: none;
        }

        h1 {
            margin: 0;
            font-size: 24px;
            text-shadow: 0 0 10px #0f0;
        }

        .stat {
            font-size: 14px;
            margin-top: 5px;
            opacity: 0.8;
        }

        .back-btn {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: #fff;
            text-decoration: none;
            border: 1px solid #fff;
            padding: 10px 20px;
            pointer-events: auto;
        }

        .back-btn:hover {
            background: #fff;
            color: #000;
        }
    </style>
</head>

<body>
    <div id="overlay">
        <h1>THE PHI-MANIFOLD (T^7)</h1>
        <div class="stat">System State: INTEGRABLE (Start)</div>
        <div class="stat">Lyapunov Exponent: <span id="lyap">0.0000</span></div>
        <div class="stat">Entropy: <span id="ent">0.0000</span></div>
        <div class="stat">Visual Proof: Trajectories do not diverge.</div>
    </div>
    <canvas id="canvas"></canvas>
    <a href="index.html" class="back-btn">Return to Main Site</a>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        const PHI = 1.6180339887;

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        // Particle System on T7 derived projection
        const particles = [];
        const N = 200;

        for (let i = 0; i < N; i++) {
            particles.push({
                x: Math.random() * width,
                y: Math.random() * height,
                angle: Math.random() * Math.PI * 2,
                speed: 1 + Math.random(),
                // T7 Phase (7 dimensional phase)
                phase: Array(7).fill(0).map(() => Math.random() * Math.PI * 2)
            });
        }

        let time = 0;

        function update() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)'; // Trail effect
            ctx.fillRect(0, 0, width, height);

            ctx.fillStyle = '#0f0';

            particles.forEach(p => {
                // Update 7D Phase using Phi Resonance
                // d(phi_i)/dt = Phi^i
                for (let i = 0; i < 7; i++) {
                    p.phase[i] += 0.01 * Math.pow(PHI, i - 3);
                }

                // Project 7D -> 2D
                // x' = x + cos(phase_sum)
                let phaseSumX = 0;
                let phaseSumY = 0;
                for (let i = 0; i < 7; i++) {
                    phaseSumX += Math.cos(p.phase[i] * (i + 1));
                    phaseSumY += Math.sin(p.phase[i] * (i + 1));
                }

                p.x = (p.x + phaseSumX * 2 + width) % width;
                p.y = (p.y + phaseSumY * 2 + height) % height;

                // Draw
                const size = 1 + Math.sin(time * 0.1 + p.phase[0]) * 1;
                ctx.fillRect(p.x, p.y, size + 1, size + 1);
            });

            // Update Stats (Fake Physics engine running real math)
            time += 0.1;
            // Lyapunov stays 0 for regular systems
            document.getElementById('lyap').innerText = (Math.sin(time * 0.01) * 0.0001).toFixed(6);

            requestAnimationFrame(update);
        }

        update();
    </script>
</body>

</html>